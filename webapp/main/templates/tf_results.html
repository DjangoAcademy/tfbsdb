{% extends "base.html" %}
{% load staticfiles %}
{% load view_tags %}
{% block title %}TFBS - View TF{% endblock %}
{% block head %}{{ block.super }}
    <link rel="stylesheet" href="{% static "stylesheets/jquery.dataTables.css" %}">

    <script src="{% static "javascripts/jquery.dataTables.min.js" %}"></script>
    <script src="{% static "javascripts/isblogo.js" %}"></script>
    <script type="text/javascript">
      {{motifs|pssms_to_js}}
      {% if motifs %}
      $(document).ready(function() {
        $('#genelist').dataTable();
      });
      {% endif %}
    </script>
{% endblock %}
{% block content %}
  {% if tfbs %}
  <h1>Transcription Factor {{motif.name}}</h1>

  <div id="canvas_0"></div>

  <div>&nbsp;</div>
  <a href="/tfgenes_csv/{{motif.name}}">Download TF Binding Sites</a>
  <div>&nbsp;</div>
  <table id="genelist">
    <thead>
    <tr><th>Entrez Id</th><th>Chromosome</th><th>Strand</th><th>Promoter Location</th><th>TSS</th><th># sites</th></tr>
    </thead>
    <tbody>
    {% for t in tfbs %}
    <tr>
      <td><a href="/viewgene/{{t.gene__name}}">{{t.gene__name}}</a></td>
      <td>{{t.gene__chromosome}}</td>
      <td>{{t.gene__orientation}}</td>
      <td>{{t.gene__start_promoter}}-{{t.gene__stop_promoter}}</td>
      <td>{{t.gene__tss}}</td>
      <td>{{t.num_sites}}</td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
  {% else %}
  No TF found for '{{tfname}}'
  {% endif %}
{% endblock %}
